const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VirtualList-49fyC2WI.js","./platform-BD71WT6-.js","./grid-B-dIn7M-.js"])))=>i.map(i=>d[i]);
import{_ as pe,D as ue}from"./grid-B-dIn7M-.js";import{B as me,F as A,S as ge,a as ye,b as be}from"./platform-BD71WT6-.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=e(t);fetch(t.href,n)}})();const fe=new Set(["security.expose_global_namespace"]);class ve{#U;#e;#k;#u={};#D;#m=null;#F=new me(50);#s;#r;#S;#g;#c;#d;#p;#y;#b;#f;#a;#P;#x=!1;#v=[];#_=[];#n;#w=null;#l=null;#h=!0;#L=[];#t=!0;#o;#i="policy.admin";#V(a,e,s){try{if(fe.has(a)){e.disabled=!0,e.title="Disabled in production by policy validator",s.classList.add("readonly");const n=document.createElement("span");n.className="badge readonly-badge",n.textContent="readonly",s.appendChild(n)}}catch{}}#C(a,e){if(!this.#t){a.disabled=!0,e.classList.add("readonly");const s=document.createElement("span");s.className="badge readonly-badge",s.textContent="locked",e.appendChild(s)}}constructor(a,{stateManager:e},s={}){if(!a||!e)throw new Error("DeveloperDashboard requires a container element and a StateManager instance.");this.#U=a,this.#e=e;const t=this.#e.managers.securityManager?.getSubject()?.role;if(!["admin","developer"].includes(t)){console.log("[DevDashboard] User does not have permission to view the developer dashboard.");return}this.#k=this.#e.managers.metricsReporter,this.#k||console.warn("[DevDashboard] MetricsReporter not found in stateManager. Dashboard will be limited."),this.#D={startOpen:!1,...s},this.#G(),this.#B(),this.#j(),this.#R();try{const o=this.#e?.managers?.policies?.getPolicy?.("security","allow_client_policy_updates"),r=this.#e?.managers?.securityManager?.getSubject?.()||{},h=Array.isArray(r.permissions)?r.permissions.includes(this.#i):r.role==="admin",u=!0;let l="";this.#t||(u&&(l="prod"),o===!1&&(l=l||"policy"),h||(l=l||"no permission")),this.#I("policy_status",{status:this.#t?"enabled":"locked",reason:l,permission:this.#i,env:u?"prod":"dev"})}catch{}this.#D.startOpen&&this.open()}#B(){this.#s=document.createElement("div"),this.#s.className="dev-dashboard",this.#D.startOpen||this.#s.classList.add("collapsed");const a=document.createElement("div");a.className="dashboard-header";const e=document.createElement("h3");e.textContent="Dev Dashboard",this.#a=document.createElement("span"),this.#a.className="flag-summary",this.#r=document.createElement("button"),this.#r.className="dashboard-toggle-btn",this.#r.textContent=this.#D.startOpen?"Collapse":"Expand",a.append(e,this.#a,this.#r);const s=document.createElement("div");s.className="dashboard-content";const t=document.createElement("div");t.className="dashboard-section",this.#S=document.createElement("div"),this.#S.id="perf-metrics",this.#u.fps=this.#N("FPS","N/A"),this.#u.latency=this.#N("Latency","N/A"),this.#u.memory=this.#N("Memory","N/A"),t.appendChild(this.#S);const n=document.createElement("div");n.className="dashboard-section";const o=document.createElement("h4");o.textContent="Core Metrics",this.#g=document.createElement("div"),this.#g.className="metrics-table-container",this.#g.textContent="No data",n.append(o,this.#g);const r=document.createElement("div");r.className="dashboard-section";const h=document.createElement("h4");h.textContent="Policies";const u=document.createElement("div");u.className="policy-controls";let l=!1,m=!1,f,b="policy.admin";try{const i=this.#e?.managers?.policies;l=!!i?.getPolicy?.("security","expose_global_namespace"),m=!!i?.getPolicy?.("security","report_unhandled_errors"),f=i?.getPolicy?.("security","allow_client_policy_updates");const p=i?.getPolicy?.("security","policy_admin_permission");p&&typeof p=="string"&&(b=p)}catch{}const g=window.location.hostname==="localhost";let v=!1;try{const i=this.#e?.managers?.securityManager?.getSubject?.()||{};v=Array.isArray(i.permissions)?i.permissions.includes(b):i.role==="admin"}catch{}this.#t=(typeof f=="boolean"?f:g)&&!!v,this.#i=b;const D=document.createElement("label");D.style.display="flex",D.style.alignItems="center",D.style.gap="8px";const P=document.createElement("input");P.type="checkbox",P.checked=l;const I=document.createElement("span");I.textContent="security.expose_global_namespace (dev only)",I.title="Expose window.Nodus. Disallowed in production by policy validator.",this.#V("security.expose_global_namespace",P,D),this.#C(P,D),D.append(P,I);const d=document.createElement("label");d.style.display="flex",d.style.alignItems="center",d.style.gap="8px";const c=document.createElement("input");c.type="checkbox",c.checked=m;const y=document.createElement("span");y.textContent="security.report_unhandled_errors",y.title="Forward window errors and unhandled rejections to ErrorHelpers.",this.#V("security.report_unhandled_errors",c,d),this.#C(c,d),d.append(c,y);let _=!1,w=!0,S=!0;try{const i=this.#e?.managers?.policies;_=!!i?.getPolicy?.("ui","enable_security_hud");const p=i?.getPolicy?.("ui","enable_virtual_list");typeof p=="boolean"&&(w=p);const x=i?.getPolicy?.("grid","enable_analytics");typeof x=="boolean"&&(S=x)}catch{}const C=document.createElement("label");C.style.display="flex",C.style.alignItems="center",C.style.gap="8px";const N=document.createElement("input");N.type="checkbox",N.checked=_;const K=document.createElement("span");K.textContent="ui.enable_security_hud",C.append(N,K),this.#C(N,C);const E=document.createElement("label");E.style.display="flex",E.style.alignItems="center",E.style.gap="8px";const z=document.createElement("input");z.type="checkbox",z.checked=w;const ae=document.createElement("span");ae.textContent="ui.enable_virtual_list",E.append(z,ae),this.#C(z,E);const U=document.createElement("label");U.style.display="flex",U.style.alignItems="center",U.style.gap="8px";const H=document.createElement("input");H.type="checkbox",H.checked=S;const se=document.createElement("span");se.textContent="grid.enable_analytics",U.append(H,se),this.#C(H,U),this.#T({hud:_,vl:w,ga:S});const Y=document.createElement("div");Y.className="status-line",this.#o=Y,this.#M({can:this.#t,isDev:g,hasPermission:v,canUpdatePolicy:f});const Q=document.createElement("div");Q.className="policy-snapshot";const L=document.createElement("div");L.className="policy-snapshot-header",L.textContent="Policy snapshot (dev) ";const X=document.createElement("label");X.style.marginLeft="8px";const G=document.createElement("input");G.type="checkbox";try{const i=localStorage.getItem("devdash.snapshot.full");i!=null&&(this.#x=i==="1")}catch{}G.checked=this.#x;const ne=document.createElement("span");ne.textContent="full",X.append(G,ne),G.addEventListener("change",()=>{this.#x=!!G.checked;try{localStorage.setItem("devdash.snapshot.full",this.#x?"1":"0")}catch{}this.#E()});const F=document.createElement("button");F.type="button",F.className="link-btn",F.textContent="copy",F.title="Copy snapshot JSON",F.addEventListener("click",async()=>{try{const i=this.#P?.textContent||JSON.stringify(this.#A(),null,2);if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(i);else{const x=document.createElement("textarea");x.value=i,document.body.appendChild(x),x.select(),document.execCommand("copy"),document.body.removeChild(x)}const p=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{p?.success?.("Policy snapshot copied")}catch{}}catch(i){const p=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{p?.error?.("Failed to copy snapshot")}catch{}console.warn("[DevDashboard] Copy snapshot failed:",i)}});const V=document.createElement("button");V.type="button",V.className="link-btn",V.textContent="copy all",V.title="Copy ALL policies (dev)",V.addEventListener("click",async()=>{try{const i=this.#e?.managers?.policies,p=i?.getAllPolicies?i.getAllPolicies():this.#A(),x=JSON.stringify(p,null,2);if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(x);else{const k=document.createElement("textarea");k.value=x,document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k)}const M=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{M?.success?.("All policies copied")}catch{}}catch(i){const p=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{p?.error?.("Failed to copy all policies")}catch{}console.warn("[DevDashboard] Copy all policies failed:",i)}});const oe=document.createElement("pre");this.#P=oe,this.#E();const O=document.createElement("select");O.className="preset-select";const he=[{label:"presets",value:"",disabled:!0},{label:"All keys (*)",value:"*"},{label:"UI only (ui.*)",value:"ui.*"},{label:"Security only (security.*)",value:"security.*"},{label:"Grid only (grid.*)",value:"grid.*"},{label:"Core flags (HUD, VL, GA)",value:"ui.enable_security_hud, ui.enable_virtual_list, grid.enable_analytics"}];for(const i of he){const p=document.createElement("option");p.textContent=i.label,p.value=i.value,i.disabled&&(p.disabled=!0),O.appendChild(p)}O.addEventListener("change",()=>{const i=O.value;if(!i)return;const p=i.split(",").map(M=>M.trim()).filter(Boolean);this.#v=p;try{localStorage.setItem("devdash.snapshot.include",p.join(","))}catch{}this.#E();const x=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{x?.success?.("Preset applied")}catch{}try{O.selectedIndex=0}catch{}}),L.appendChild(X),L.appendChild(F),L.appendChild(V),L.appendChild(O);const $=document.createElement("button");$.type="button",$.className="link-btn",$.textContent="config",$.title="Configure snapshot include patterns (comma-separated paths; wildcard * allowed)";try{const i=localStorage.getItem("devdash.snapshot.include");i&&(this.#v=i.split(",").map(p=>p.trim()).filter(Boolean))}catch{}$.addEventListener("click",()=>{try{const i=this.#v.join(", "),p=window.prompt("Enter include patterns (e.g., ui.*, grid.enable_analytics)",i);if(p==null)return;const x=p.split(",").map(k=>k.trim()).filter(Boolean);this.#v=x;try{localStorage.setItem("devdash.snapshot.include",x.join(","))}catch{}this.#E();const M=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{M?.success?.("Snapshot filters updated")}catch{}}catch(i){const p=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{p?.error?.("Failed to update snapshot config")}catch{}console.warn("[DevDashboard] Snapshot config failed:",i)}}),L.appendChild($);const B=document.createElement("button");B.type="button",B.className="link-btn",B.textContent="reset IndexedDB",B.title="Clear core stores (audit_events, system_settings)";let ie=!1;try{const p=this.#e?.managers?.policies?.getPolicy?.("security","allow_storage_reset"),x=window.location.hostname==="localhost";ie=typeof p=="boolean"?p:x}catch{}ie&&(B.addEventListener("click",async()=>{try{if(!window.confirm("Reset IndexedDB stores (audit_events, system_settings)?"))return;const i=this.#e?.storage?.instance;await i?.clear?.("audit_events"),await i?.clear?.("system_settings");const p=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{p?.success?.("IndexedDB stores cleared")}catch{}}catch(i){const p=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{p?.error?.("Failed to reset IndexedDB")}catch{}console.warn("[DevDashboard] Reset IndexedDB failed:",i)}}),L.appendChild(B)),Q.append(L,oe),u.append(D,d,C,E,U,Y,Q),r.append(h,u),this.#d=P,this.#p=c,this.#y=N,this.#b=z,this.#f=H;const Z=document.createElement("div");Z.className="dashboard-section";const re=document.createElement("h4");re.textContent="Event Log",this.#c=document.createElement("div"),this.#c.className="event-log-container",this.#c.textContent="No events",Z.append(re,this.#c);const ee=document.createElement("div");ee.className="dashboard-section";const ce=document.createElement("h4");ce.textContent="Bootstrap Stages";const j=document.createElement("div");j.style.display="flex",j.style.gap="8px",j.style.alignItems="center";const R=document.createElement("button");R.type="button",R.className="link-btn",R.textContent="export CSV",R.title="Export bootstrap stages as CSV",R.addEventListener("click",()=>{try{const p=[["stage","duration_ms"]].concat((this.#_||[]).map(J=>[J.stage,String(Number(J.duration||0).toFixed(2))])).map(J=>J.map(te=>/[",\n]/.test(te)?'"'+String(te).replace(/"/g,'""')+'"':te).join(",")).join(`
`),x=new Blob([p],{type:"text/csv;charset=utf-8"}),M=URL.createObjectURL(x),k=document.createElement("a");k.href=M,k.download=`bootstrap_stages_${Date.now()}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(M)}catch(i){console.warn("[DevDashboard] CSV export failed:",i)}}),j.appendChild(R);const q=document.createElement("label");q.style.display="inline-flex",q.style.alignItems="center",q.style.gap="4px";const W=document.createElement("input");W.type="checkbox";try{const i=localStorage.getItem("devdash.stages.chart");i!=null&&(this.#h=i==="1")}catch{}W.checked=this.#h;const le=document.createElement("span");le.textContent="chart",q.append(W,le),W.addEventListener("change",()=>{this.#h=!!W.checked;try{localStorage.setItem("devdash.stages.chart",this.#h?"1":"0")}catch{}this.#l&&(this.#l.style.display=this.#h?"block":"none"),this.#h&&this.#O()}),j.appendChild(q),this.#n=document.createElement("div"),this.#n.className="stages-table-container",this.#n.textContent="No stage metrics yet",this.#l=document.createElement("canvas"),this.#l.className="stages-chart-canvas",ee.append(ce,j,this.#n,this.#l),this.#l&&(this.#l.style.display=this.#h?"block":"none"),s.append(t,n,r,ee,Z),this.#s.append(a,s),this.#U.appendChild(this.#s)}#N(a,e){A.createEnvelope({actorId:"system",action:"<auto>",target:"<unknown>",label:"unclassified"});const s=document.createElement("div");s.className="perf-item";const t=document.createElement("strong");t.textContent=`${a}:`;const n=document.createElement("span");return n.textContent=` ${e}`,s.append(t,n),this.#S.appendChild(s),n}#j(){this.#r.addEventListener("click",()=>this.toggle()),this.#s.querySelector(".dashboard-header").addEventListener("click",e=>{e.target!==this.#r&&this.toggle()});const a=this.#e?.managers?.policies;a&&(this.#d?.addEventListener?.("change",async e=>{if(!this.#t){try{e.target.checked=!!a.getPolicy("security","expose_global_namespace")}catch{}console.warn("[DevDashboard] Client policy updates disabled; change ignored.");return}try{await a.update("security","expose_global_namespace",!!e.target.checked),console.log("[DevDashboard] Updated policy: security.expose_global_namespace =",e.target.checked)}catch(s){console.warn("[DevDashboard] Failed to update expose_global_namespace:",s)}}),this.#p?.addEventListener?.("change",async e=>{if(!this.#t){try{e.target.checked=!!a.getPolicy("security","report_unhandled_errors")}catch{}console.warn("[DevDashboard] Client policy updates disabled; change ignored.");return}try{await a.update("security","report_unhandled_errors",!!e.target.checked),console.log("[DevDashboard] Updated policy: security.report_unhandled_errors =",e.target.checked)}catch(s){console.warn("[DevDashboard] Failed to update report_unhandled_errors:",s)}}),this.#y?.addEventListener?.("change",async e=>{if(!this.#t){try{e.target.checked=!!a.getPolicy("ui","enable_security_hud")}catch{}console.warn("[DevDashboard] Client policy updates disabled; change ignored.");return}try{await a.update("ui","enable_security_hud",!!e.target.checked),console.log("[DevDashboard] Updated policy: ui.enable_security_hud =",e.target.checked)}catch(s){console.warn("[DevDashboard] Failed to update ui.enable_security_hud:",s)}}),this.#b?.addEventListener?.("change",async e=>{if(!this.#t){try{e.target.checked=!!a.getPolicy("ui","enable_virtual_list")}catch{}console.warn("[DevDashboard] Client policy updates disabled; change ignored.");return}try{await a.update("ui","enable_virtual_list",!!e.target.checked),console.log("[DevDashboard] Updated policy: ui.enable_virtual_list =",e.target.checked)}catch(s){console.warn("[DevDashboard] Failed to update ui.enable_virtual_list:",s)}}),this.#f?.addEventListener?.("change",async e=>{if(!this.#t){try{e.target.checked=!!a.getPolicy("grid","enable_analytics")}catch{}console.warn("[DevDashboard] Client policy updates disabled; change ignored.");return}try{await a.update("grid","enable_analytics",!!e.target.checked),console.log("[DevDashboard] Updated policy: grid.enable_analytics =",e.target.checked)}catch(s){console.warn("[DevDashboard] Failed to update grid.enable_analytics:",s)}}))}#R(){["cache_audit","stack_eviction","performance_alert","error"].forEach(t=>{const n=this.#e.on(t,o=>this.#I(t,o));this.#L.push(n)}),console.log("[DevDashboard] Subscribed to system events.");const e=this.#e.on("policyEvent",t=>{try{const{type:n,data:o}=t||{};n==="policy_updated"&&o?.domain==="security"&&(o.key==="expose_global_namespace"&&this.#d&&(this.#d.checked=!!o.newValue),o.key==="report_unhandled_errors"&&this.#p&&(this.#p.checked=!!o.newValue),o.key==="allow_client_policy_updates"&&(this.#t=!!o.newValue,this.#d&&(this.#d.disabled=!this.#t||this.#d.disabled),this.#p&&(this.#p.disabled=!this.#t||this.#p.disabled),this.#M({can:this.#t})),o.domain==="ui"&&(o.key==="enable_security_hud"&&this.#y&&(this.#y.checked=!!o.newValue,this.#y.disabled=!this.#t||this.#y.disabled),o.key==="enable_virtual_list"&&this.#b&&(this.#b.checked=!!o.newValue,this.#b.disabled=!this.#t||this.#b.disabled)),o.domain==="grid"&&o.key==="enable_analytics"&&this.#f&&(this.#f.checked=!!o.newValue,this.#f.disabled=!this.#t||this.#f.disabled),this.#T(),this.#I("policy_updated",{source:"policy",policy:`${o.domain}.${o.key}`,oldValue:o.oldValue,newValue:o.newValue}),this.#E())}catch{}});this.#L.push(e);const s=this.#e.on("metrics",t=>{try{t?.type==="bootstrap.stage"&&(this.#_.push({stage:t.stage,duration:t.duration}),this.#z(),this.#O())}catch{}});this.#L.push(s)}#M({can:a,isDev:e,hasPermission:s,canUpdatePolicy:t}={}){if(A.createEnvelope({actorId:"system",action:"<auto>",target:"<unknown>",label:"unclassified"}),!this.#o)return;const n=window.location.hostname==="localhost",o=a??this.#t;let r="";o||(r="prod",t===!1&&(r=r||"policy"),s===!1&&(r=r||"no permission"));const h=o?"Policy updates: enabled":`Policy updates: locked${r?` (${r})`:""}`;try{const l=this.#e?.managers?.securityManager?.getSubject?.()||{},m=Array.isArray(l.permissions)?l.permissions.join(", "):"none";this.#o.title=`Requires permission: ${this.#i}. User role: ${l.role||"unknown"}. User perms: ${m}.`}catch{}for(this.#o.className=`status-line ${o?"enabled":"locked"}`;this.#o.firstChild;)this.#o.removeChild(this.#o.firstChild);const u=document.createElement("span");if(u.textContent=`${h} (perm: ${this.#i})`,this.#o.appendChild(u),n){const l=document.createElement("button");l.type="button",l.className="link-btn",l.textContent="change",l.title="Set security.policy_admin_permission (dev only helper)",l.addEventListener("click",()=>{try{const f=window.prompt("Enter new policy admin permission (string)",this.#i||"policy.admin");if(!f||typeof f!="string"||!f.trim())return;const b=this.#e?.managers?.policies;if(!b?.update)return;b.update("security","policy_admin_permission",f.trim()).then(()=>{this.#i=f.trim(),this.#M({can:this.#t});const g=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{g?.success?.(`Policy admin permission set: ${this.#i}`)}catch{}console.info("[DevDashboard] Updated security.policy_admin_permission to:",this.#i)}).catch(g=>{const v=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{v?.error?.("Failed to update policy_admin_permission")}catch{}console.warn("[DevDashboard] Failed to update policy_admin_permission:",g)})}catch{}});const m=document.createElement("span");m.textContent=" ",this.#o.appendChild(m),this.#o.appendChild(l)}}#T({hud:a,vl:e,ga:s}={}){A.createEnvelope({actorId:"system",action:"<auto>",target:"<unknown>",label:"unclassified"});try{const t=this.#e?.managers?.policies;if(a===void 0&&(a=!!t?.getPolicy?.("ui","enable_security_hud")),e===void 0){const n=t?.getPolicy?.("ui","enable_virtual_list");e=typeof n=="boolean"?n:!0}if(s===void 0){const n=t?.getPolicy?.("grid","enable_analytics");s=typeof n=="boolean"?n:!0}if(this.#a){for(;this.#a.firstChild;)this.#a.removeChild(this.#a.firstChild);const n=document.createElement("span");n.textContent="Flags:",this.#a.appendChild(n);const o=(h,u)=>{const l=document.createElement("span");l.className=`flag-badge ${u?"on":"off"}`,l.textContent=`${h}: ${u?"ON":"OFF"}`;const m={HUD:"Security HUD (ui.enable_security_hud)",VL:"Virtual List (ui.enable_virtual_list)",GA:"Grid Analytics (grid.enable_analytics)"};l.title=m[h]||h;try{window.location.hostname==="localhost"&&this.#t&&(l.classList.add("clickable"),l.addEventListener("click",async()=>{try{const b=this.#e?.managers?.policies;if(!b?.update)return;let g="ui",v="";h==="HUD"?v="enable_security_hud":h==="VL"?v="enable_virtual_list":h==="GA"&&(g="grid",v="enable_analytics"),await b.update(g,v,!u),this.#T();const D=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{D?.success?.(`${v} set to ${u?"OFF":"ON"}`)}catch{}}catch(b){const g=this.#e?.managers?.systemToastManager||this.#e?.managers?.SystemToastManager;try{g?.error?.("Failed to update flag")}catch{}console.warn("[DevDashboard] Failed to toggle flag badge:",b)}}))}catch{}return l};this.#a.appendChild(o("HUD",!!a)),this.#a.appendChild(o("VL",!!e)),this.#a.appendChild(o("GA",!!s));const r="Legend: HUD=Security HUD; VL=Virtual List; GA=Grid Analytics";this.#a.title=r,this.#a.setAttribute("aria-label",r)}}catch{}}#E(){A.createEnvelope({actorId:"system",action:"<auto>",target:"<unknown>",label:"unclassified"});try{if(!this.#P)return;const a=this.#A();this.#P.textContent=JSON.stringify(a,null,2)}catch{}}#z(){try{if(!this.#n)return;const a=this.#_||[];for(;this.#n.firstChild;)this.#n.removeChild(this.#n.firstChild);if(!a.length){this.#n.textContent="No stage metrics yet";return}const e=document.createElement("table");e.className="stages";const s=document.createElement("thead"),t=document.createElement("tr"),n=document.createElement("th");n.textContent="Stage";const o=document.createElement("th");o.textContent="Duration",t.appendChild(n),t.appendChild(o),s.appendChild(t);const r=document.createElement("tbody");for(const h of a){const u=document.createElement("tr"),l=document.createElement("td");l.textContent=h.stage;const m=document.createElement("td");m.style.textAlign="right",m.textContent=`${Number(h.duration).toFixed(2)} ms`,u.appendChild(l),u.appendChild(m),r.appendChild(u)}e.appendChild(s),e.appendChild(r),this.#n.appendChild(e)}catch{}}async#O(){try{const a=this.#l?.getContext?.("2d");if(!a)return;const e=(this.#_||[]).map(t=>t.stage),s=(this.#_||[]).map(t=>Number(t.duration||0));if(e.length===0)return;if(typeof window<"u"&&!window.Chart)try{await pe(()=>import("./vendor-C_bQRYrM.js"),[],import.meta.url)}catch{}if(!window.Chart)return;this.#w?(this.#w.data.labels=e,this.#w.data.datasets[0].data=s,this.#w.update()):this.#w=new window.Chart(a,{type:"bar",data:{labels:e,datasets:[{label:"Duration (ms)",data:s,backgroundColor:"#4e9cff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{title:{display:!0,text:"ms"}}}}})}catch{}}#A(){const a={};try{const e=this.#e?.managers?.policies;if(!e?.getPolicy)return{error:"PolicyManager not available"};if(this.#x)return e.getAllPolicies?e.getAllPolicies():{error:"getAllPolicies not available"};const s=new Set(["security.expose_global_namespace","security.report_unhandled_errors","security.allow_client_policy_updates","security.policy_admin_permission","ui.enable_security_hud","ui.enable_virtual_list","grid.enable_analytics"]);if(this.#v.length>0){const t=e.getAllPolicyKeys?e.getAllPolicyKeys():[];for(const n of this.#v){if(n==="*"){t.forEach(r=>s.add(r));break}const o=new RegExp(`^${n.replace(/\*/g,".*")}$`);for(const r of t)o.test(r)&&s.add(r)}}for(const t of s){const[n,...o]=t.split(".");a[t]=e.getPolicy(n,o.join("."))}}catch{}return a}toggle(){this.#s.classList.contains("collapsed")?this.open():this.close()}open(){this.#s.classList.remove("collapsed"),this.#r.textContent="Collapse",this.#$(),this.#m=setInterval(()=>this.#$(),1e3)}close(){this.#s.classList.add("collapsed"),this.#r.textContent="Expand",this.#m&&(clearInterval(this.#m),this.#m=null)}#$(){if(A.createEnvelope({actorId:"system",action:"<auto>",target:"<unknown>",label:"unclassified"}),!this.#k)return;const a=this.#k.getCurrentSummary(),e=a.memory?(a.memory.jsHeapUsed/1024/1024).toFixed(2):"N/A";this.#u.fps.textContent=` ${a.fps}`,this.#u.latency.textContent=` ${a.latency.render.toFixed(2)}ms`,this.#u.memory.textContent=` ${e} MB`,this.#g.textContent="";const s=document.createElement("table"),t=document.createElement("thead");t.textContent="<tr><th>Metric</th><th>Value</th></tr>";const n=document.createElement("tbody");for(const[o,r]of Object.entries(a.core||{})){const h=n.insertRow(),u=h.insertCell(),l=h.insertCell();u.textContent=o;let m="";r.type==="counter"?m=r.value:r.type==="timer"?m=`avg: ${r.avg.toFixed(2)}ms (count: ${r.count})`:r.type==="histogram"&&(m=`avg: ${r.avg.toFixed(2)} (count: ${r.count})`),l.textContent=m}s.append(t,n),this.#g.appendChild(s)}#H(){for(A.createEnvelope({actorId:"system",action:"<auto>",target:"<unknown>",label:"unclassified"});this.#c.firstChild;)this.#c.removeChild(this.#c.firstChild);for(const a of this.#F.toArray()){const e=this.#q(a);e&&e.nodeType===1&&this.#c.appendChild(e)}}#G(){const a="dev-dashboard-styles";if(document.getElementById(a))return;const e=document.createElement("style");e.id=a,e.textContent=`
      .dev-dashboard {
        position: fixed;
        bottom: 10px;
        left: 10px;
        width: 450px;
        max-height: 50vh;
        background-color: rgba(30, 30, 30, 0.9);
        color: #eee;
        border: 1px solid #444;
        border-radius: 8px;
        z-index: 2000;
        font-family: "SF Mono", "Consolas", "Menlo", monospace;
        font-size: 12px;
        transition: transform 0.3s ease-in-out;
        overflow: hidden;
      }
      .dev-dashboard.collapsed {
        transform: translateY(calc(100% - 40px));
      }
      .dev-dashboard .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 5px 15px;
        background-color: #333;
        cursor: pointer;
      }
      .dev-dashboard .dashboard-header h3 { margin: 0; font-size: 14px; }
      .dev-dashboard .dashboard-toggle-btn { background: #555; color: #fff; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; }
      .dev-dashboard .dashboard-content { padding: 15px; overflow-y: auto; max-height: calc(50vh - 40px); }
      .dev-dashboard .dashboard-section { margin-bottom: 15px; }
      .dev-dashboard #perf-metrics { display: flex; justify-content: space-around; background: #2a2a2a; padding: 10px; border-radius: 4px; }
      .dev-dashboard .metrics-table-container { max-height: 200px; overflow-y: auto; border: 1px solid #444; }
      .dev-dashboard table { width: 100%; border-collapse: collapse; }
      .dev-dashboard th, .dev-dashboard td { padding: 4px 8px; text-align: left; border-bottom: 1px solid #444; }
      .dev-dashboard th { background-color: #3a3a3a; position: sticky; top: 0; z-index: 1; }
      .dev-dashboard tr:nth-child(even) { background-color: #2c2c2c; }
      .dev-dashboard .event-log-container { max-height: 150px; overflow-y: auto; border: 1px solid #444; padding: 5px; background: #2a2a2a; }
      .dev-dashboard .event-log-item { padding: 4px; border-bottom: 1px solid #383838; display: flex; justify-content: space-between; align-items: center; }
      .dev-dashboard .event-log-item:last-child { border-bottom: none; }
      .dev-dashboard .event-log-name { font-weight: 600; color: #9cdcfe; }
      .dev-dashboard .event-log-source { color: #ce9178; }
      .dev-dashboard .event-log-time { color: #888; font-size: 10px; }
      .dev-dashboard .policy-controls label.readonly { opacity: 0.6; }
      .dev-dashboard .policy-controls .badge { margin-left: 6px; font-size: 10px; padding: 1px 4px; border-radius: 3px; background: #555; color: #eee; border: 1px solid #666; }
      .dev-dashboard .policy-controls .readonly-badge { background: #444; color: #bbb; }
      .dev-dashboard .status-line { margin-top: 8px; font-size: 11px; color: #bbb; }
      .dev-dashboard .status-line.enabled { color: #a6e22e; }
      .dev-dashboard .status-line.locked { color: #f92672; }
      .dev-dashboard .dashboard-header .flag-summary { margin: 0 8px; font-size: 11px; color: #bbb; }
      .dev-dashboard .dashboard-header .flag-summary .flag-badge { margin-left: 6px; font-size: 10px; padding: 1px 6px; border-radius: 10px; border: 1px solid transparent; }
      .dev-dashboard .dashboard-header .flag-summary .flag-badge.on { background: #28a745; color: #fff; border-color: #1e7e34; }
      .dev-dashboard .dashboard-header .flag-summary .flag-badge.off { background: #dc3545; color: #fff; border-color: #c82333; }
      .dev-dashboard .dashboard-header .flag-summary .flag-badge.clickable { cursor: pointer; text-decoration: underline; }
      .dev-dashboard .policy-snapshot { margin-top: 8px; border: 1px solid #444; background: #2a2a2a; border-radius: 4px; }
      .dev-dashboard .policy-snapshot-header { padding: 4px 8px; background: #3a3a3a; font-weight: 600; }
      .dev-dashboard .policy-snapshot-header .link-btn { margin-left: 8px; background: none; border: none; color: #9cdcfe; cursor: pointer; text-decoration: underline; padding: 0; }
      .dev-dashboard .policy-snapshot pre { margin: 0; padding: 8px; max-height: 160px; overflow: auto; color: #ddd; }
      .dev-dashboard .stages-table-container table { width: 100%; border-collapse: collapse; }
      .dev-dashboard .stages-table-container th, .dev-dashboard .stages-table-container td { padding: 4px 8px; border-bottom: 1px solid #444; }
      .dev-dashboard .stages-chart-canvas { width: 100%; height: 180px; display: block; }
      .dev-dashboard .status-line .link-btn { margin-left: 6px; background: none; border: none; color: #9cdcfe; cursor: pointer; text-decoration: underline; padding: 0; }
    `,document.head.appendChild(e)}#I(a,e){this.#F.push({name:a,payload:e,loggedAt:new Date(ue.timestamp())}),this.#s.classList.contains("collapsed")||this.#H()}#q({name:a,payload:e,loggedAt:s}){const t=s.toLocaleTimeString([],{hour12:!1}),n=e.source||e.component||"system",o=document.createElement("div");o.className="event-log-item";const r=document.createElement("span");r.className="event-log-name",r.textContent=a;const h=document.createElement("span");h.className="event-log-source",h.textContent=n;const u=document.createElement("span");return u.className="event-log-time",u.textContent=t,o.append(r,h,u),o}destroy(){this.#m&&clearInterval(this.#m),this.#L.forEach(e=>e()),this.#s?.remove(),document.getElementById("dev-dashboard-styles")?.remove(),console.log("[DevDashboard] Destroyed.")}}const de={demoMode:!0,storageConfig:{dbName:"nodus_offline",version:1,stores:{objects:{keyPath:"id",indexes:[{name:"entity_type",keyPath:"entity_type"},{name:"classification",keyPath:"classification"},{name:"updated_at",keyPath:"updated_at"}]}}},sync:{enableSync:!1,realtime:!1},cdsProxyEndpoint:"/api/cds/proxy"};class xe{constructor({hybridStateManager:a,startOpen:e=!1,position:s="bottom-right"}){if(!a)throw new Error("SecurityExplainer: hybridStateManager required");this.hsm=a,this.position=s,this.events=[],this.maxEvents=200,this._panel=this._buildPanel(),document.body.appendChild(this._panel),e||this._panel.classList.add("collapsed"),this._unsubs=[this.hsm.on?.("securityEvent",t=>this._log("SEC",t)),this.hsm.on?.("entitySaved",t=>this._log("SAVE",t)),this.hsm.on?.("entityDeleted",t=>this._log("DEL",t)),this.hsm.on?.("macDecision",t=>this._log("MAC",t)),this.hsm.storage?.instance?.stateManager?.on?.("polyMerge",t=>this._log("POLY",t))].filter(Boolean),window.__securityHUD||(window.__securityHUD={toggle:()=>this.toggle(),clear:()=>this.clear()})}dispose(){for(const a of this._unsubs)try{a()}catch{}this._panel.remove()}toggle(){this._panel.classList.toggle("collapsed")}clear(){this.events.length=0,this._panel.querySelector(".sec-body").textContent=""}_buildPanel(){const a=document.createElement("div");a.className=`sec-hud ${this.position}`;const e=document.createElement("style");e.textContent=`
				.sec-hud {
					position: fixed; font: 12px/1.4 system-ui,Segoe UI,Roboto,Arial;
					background: rgba(10,10,14,.92); color:#d5e1ff; width: 420px; max-height: 50vh;
					border:1px solid #2b3552; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,.45);
					overflow: hidden; z-index: 99999; backdrop-filter: blur(6px)
				}
				.sec-hud.bottom-right { right: 16px; bottom: 16px; }
				.sec-hud.bottom-left { left: 16px; bottom: 16px; }
				.sec-hud.top-right { right: 16px; top: 16px; }
				.sec-hud.top-left { left: 16px; top: 16px; }
				.sec-hud.collapsed .sec-body { display:none }
				.sec-header { display:flex; align-items:center; gap:8px; padding:8px 10px; background:#0f1424; border-bottom:1px solid #2b3552 }
				.sec-header .title { font-weight: 700; letter-spacing:.2px; flex:1 }
				.sec-header button { background:#1a2442; color:#c6d4ff; border:1px solid #2b3552; border-radius:6px; padding:4px 8px; cursor:pointer }
				.sec-body { overflow:auto; max-height: calc(50vh - 40px); }
				.sec-row { display:grid; grid-template-columns: 60px 56px 1fr; gap:8px; padding:8px 10px; border-bottom:1px dashed #2b3552 }
				.tag { font-weight:700; color:#93b4ff }
				.pill { padding:0 6px; border-radius: 6px; display:inline-block; border:1px solid #2b3552; background:#131b31; font-size: 11px; color:#a3baff }
				.muted { color:#7b88a8 }
				.level-U { color:#a0ffd1 } .level-C { color:#ffd48a } .level-S { color:#ff9aa2 } .level-NS { color:#fca0ff }
				.kv { display:flex; gap:6px; flex-wrap: wrap }
				.kv .k { color:#8aa3ff } .kv .v { color:#c7d4ff }
				.monos { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 11px }
			`;const s=document.createElement("div");s.className="sec-header";const t=document.createElement("div");t.className="title",t.textContent="Security Explainer";const n=document.createElement("button");n.setAttribute("data-cmd","collapse"),n.textContent="Toggle";const o=document.createElement("button");o.setAttribute("data-cmd","clear"),o.textContent="Clear",s.append(t,n,o);const r=document.createElement("div");return r.className="sec-body",a.appendChild(e),a.appendChild(s),a.appendChild(r),requestAnimationFrame(()=>{n.addEventListener("click",()=>this.toggle()),o.addEventListener("click",()=>this.clear())}),a}_log(a,e){const s={ts:Date.now(),tag:a,payload:e};this.events.push(s),this.events.length>this.maxEvents&&this.events.shift(),this._appendRow(s)}_appendRow({ts:a,tag:e,payload:s}){const t=this._panel.querySelector(".sec-body"),n=document.createElement("div");n.className="sec-row";const o=new Date(a).toLocaleTimeString(),r=g=>{const v=String(g||"").toLowerCase();return v.includes("nato")?"level-NS":v.startsWith("secret")?"level-S":v.startsWith("confidential")?"level-C":"level-U"},h=s?.label?.level??s?.derivedLabel?.level??s?.objectLabel?.level??s?.entity?.classification??s?.classification_level??"unclassified",u=document.createElement("div");u.className="muted monos",u.textContent=o;const l=document.createElement("div");l.className=`tag ${r(h)}`,l.textContent=e;const m=document.createElement("div"),f=document.createElement("div");f.className="kv";const b=g=>{g&&f.appendChild(g)};if(b(this._kv("level",h)),b(this._kv("compartments",(s?.label?.compartments??s?.compartments??[]).join(","))),b(this._kv("logical_id",s?.logical_id)),b(this._kv("id",s?.id)),b(this._kv("op",s?.operation)),b(this._kv("reason",s?.reason)),m.appendChild(f),s?.explain){const g=document.createElement("div");g.className="muted monos",g.textContent=s.explain,m.appendChild(g)}n.appendChild(u),n.appendChild(l),n.appendChild(m),t.appendChild(n),t.scrollTop=t.scrollHeight}_kv(a,e){if(e==null||e==="")return null;const s=document.createElement("span");s.className="pill";const t=document.createElement("span");t.className="k",t.textContent=`${a}:`;const n=document.createElement("span");return n.className="v monos",n.textContent=String(e),s.appendChild(t),s.appendChild(document.createTextNode(" ")),s.appendChild(n),s}}class _e{constructor({hybridStateManager:a}){this.hybridStateManager=a,this.audit=a.forensicLogger,this.mac=a.mac}attach(a=document){a.addEventListener("click",e=>this._handle(e))}async _handle(a){const e=a.target.closest("[data-action]");if(!e)return;const s=e.dataset.action,t=e.dataset.entity;try{const n=await this.hybridStateManager.getEntity(t),o=this.mac.label(n);switch(s){case"save":this.mac.enforceNoWriteDown(this.mac.subject(),o),await this.hybridStateManager.saveEntity(n);break;case"delete":this.mac.enforceNoWriteDown(this.mac.subject(),o),await this.hybridStateManager.deleteEntity(t);break;default:console.warn(`[ActionDispatcher] Unknown action: ${s}`)}await this.audit.signAction({userId:this.hybridStateManager.currentUserId,action:s,label:o})}catch(n){console.error(`[ActionDispatcher] ${s} failed:`,n)}}}const we=async()=>{if(window.__bootstrappingNodus)return;if(window.__bootstrappingNodus=!0,window.nodusApp){console.warn("[Nodus] Application already initialized. Skipping bootstrap.");return}console.log("ðŸš€ Nodus Grid Data Layer Test Starting..."),de.cdsTransport=function(c,y){const _=typeof globalThis<"u"&&globalThis.__NODUS_NATIVE_FETCH__;return typeof _=="function"?_(c,y):Promise.reject(new Error("No native CDS transport available (set globalThis.__NODUS_NATIVE_FETCH__)"))};const T=new ge({...de}),a=performance.now(),e=await T.initialize({userId:"demo-user",clearanceLevel:"internal"}),s=performance.now()-a;console.info(`â±ï¸ Bootstrap complete in ${s.toFixed(1)}ms`);try{e.emit&&e.emit("metrics",{type:"bootstrap",duration:s})}catch{}window.nodusApp=e;const t={hybridStateManager:e};window.appViewModel=t;const n=e?.managers?.policies;try{const d={hasSigner:!!e?.signer,hasIndexedDB:!!e?.storage?.ready,policies:{ui:{enable_security_hud:!!n?.getPolicy?.("ui","enable_security_hud"),enable_virtual_list:(function(){const c=n?.getPolicy?.("ui","enable_virtual_list");return typeof c=="boolean"?c:!0})()},grid:{enable_analytics:(function(){const c=n?.getPolicy?.("grid","enable_analytics");return typeof c=="boolean"?c:!0})()},security:{allow_client_policy_updates:!!n?.getPolicy?.("security","allow_client_policy_updates"),policy_admin_permission:n?.getPolicy?.("security","policy_admin_permission")||"policy.admin"}}};Object.freeze?.(d.policies.ui),Object.freeze?.(d.policies.grid),Object.freeze?.(d.policies.security),Object.freeze?.(d.policies),window.__nodusCapabilities=d}catch{}const o=e.managers?.completeGridSystem;try{if(!o)console.warn("[Grid] No `completeGridSystem` service registered on stateManager.managers; skipping grid initialization.");else if(!o.isInitialized||!o.isInitialized()){const d=performance.now();await o.initialize();const c=performance.now()-d;console.info(`â±ï¸ Grid initialized in ${c.toFixed(1)}ms`);try{let y;try{y=n?.getPolicy?.("grid","enable_analytics")}catch{}y!==!1&&e.emit&&e.emit("metrics",{type:"grid_init",duration:c})}catch{}}}catch(d){console.error("[Grid] Initialization failed:",d)}try{const d="dev-default",c=Number(e?.managers?.policies?.getPolicy("grid","default_columns")??24),y=6,C={blocks:[{id:"starter",type:"button",x:Math.max(0,Math.floor((c-y)/2)),y:2,w:y,h:4,constraints:{minW:2,minH:2,maxW:c,maxH:1e3},props:{label:"Add Block",mode:"modal",variant:"primary"}}]};await o.setRuntimeConfig(C,d)}catch{}const r=new ye({stateManager:e});await r.start(document),e.managers=e.managers||{},e.managers.bindEngine=r;const h=new be(e);h.attachBindEngine(r),e.managers.stateUIBridge=h;const u=new _e({hybridStateManager:e});u.attach(document),e.managers.actionDispatcher=u;try{const d=e?.managers?.policies;let c,y;try{c=d?.getPolicy?.("ui","enable_bind_bridge"),y=d?.getPolicy?.("ui","bind_bridge_update_inputs")}catch{}typeof c!="boolean"&&(c=!1),typeof y!="boolean"&&(y=!1),c&&e.on?h.enableDomBridge({root:document,updateInputs:y}):h.disableDomBridge()}catch{h.disableDomBridge()}let l=null,m;try{m=n?.getPolicy?.("ui","enable_security_hud")}catch{}if(typeof m!="boolean"&&(m=window.location.hostname==="localhost"),m){l=new xe({hybridStateManager:e});try{Object.defineProperty(window,"__securityHUD",{value:{toggle:()=>l.toggle(),clear:()=>l.clear()},configurable:!1,enumerable:!1})}catch{}}let f=null;const b=document.querySelector("#virtual-grid");let g;try{g=n?.getPolicy?.("ui","enable_virtual_list")}catch{}typeof g!="boolean"&&(g=!0);const v=[],D=({result:d})=>{const c=d&&Array.isArray(d)?d:[];v.splice(0,v.length,...c);try{f?.refresh?.()}catch{}};g&&e.on&&e.on("entitiesLoaded",D);async function P(){if(A.createEnvelope({actorId:"system",action:"<auto>",target:"<unknown>",label:"unclassified"}),!(!b||f))try{const{default:d}=await pe(async()=>{const{default:c}=await import("./VirtualList-49fyC2WI.js");return{default:c}},__vite__mapDeps([0,1,2]),import.meta.url);f=new d({container:b,itemHeight:44,count:()=>v.length,keyOf:c=>v[c]?.id??c,render:(c,y)=>{const _=v[y];for(c.className="row";c.firstChild;)c.removeChild(c.firstChild);const w=document.createElement("div");w.className="title monos",w.textContent=_?.title??_?.id??y;const S=document.createElement("div");S.className="meta",S.textContent=_?.entity_type??"",c.appendChild(w),c.appendChild(S)}}),f.mount();try{f.refresh()}catch{}window.__vlistData=v}catch(d){console.warn("[Nodus] VirtualList failed to load:",d)}}if(b&&g)try{if("IntersectionObserver"in window){const d=new IntersectionObserver(c=>{for(const y of c)if(y.isIntersecting){d.unobserve(b),d.disconnect(),P();break}},{root:null,threshold:.1});d.observe(b)}else await P()}catch{}console.log("âœ… Complete Grid System Initialized. Application is ready."),console.log("%cNODUS READY","color:#80ffaa;font-weight:bold");let I=null;try{const d=window.location.hostname==="localhost",c=e?.managers?.policies,_=e?.managers?.securityManager?.getSubject?.()||{};let w;try{w=c?.getPolicy?.("system","enable_developer_dashboard")}catch{}const S=typeof w=="boolean"?w:d;let C="dev.dashboard.view";try{const E=c?.getPolicy?.("system","developer_dashboard_permission");E&&typeof E=="string"&&(C=E)}catch{}const N=Array.isArray(_?.permissions)?_.permissions.includes(C):_?.role==="admin",K=performance.now();S&&N?I=new ve(document.body,{stateManager:e}):console.debug("[DevDashboard] Suppressed (enabled:",S,", perm:",C,", hasPerm:",N,")");try{const E=performance.now()-K;e.emit&&e.emit("metrics",{type:"bootstrap.stage",stage:"dashboard",duration:E})}catch{}}catch{}try{const d=e?.managers?.policies,c=window.location.hostname==="localhost";let y;try{y=d?.getPolicy?.("security","expose_global_namespace")}catch{}if(typeof y=="boolean"?y:c){const w={state:e,hud:l,vlist:f,dashboard:I,uiBridge:h,capabilities:window.__nodusCapabilities||{}};Object.freeze?.(w),Object.defineProperty(window,"Nodus",{value:w,configurable:!1,enumerable:!1,writable:!1})}}catch{}};try{const T=window.nodusApp?.managers?.policies;let a;try{a=T?.getPolicy?.("security","report_unhandled_errors")}catch{}if(typeof a=="boolean"?a:!1){const s=t=>{try{const n=window.nodusApp?.managers?.errorHelpers||window.nodusApp?.managers?.ErrorHelpers,o=t?.reason?.message||t?.message||String(t?.reason||t);n?.handleError?.(o,t?.error||t?.reason||t)}catch{}};window.addEventListener?.("error",t=>s(t)),window.addEventListener?.("unhandledrejection",t=>s(t))}}catch{}we().finally(()=>{window.__bootstrappingNodus=!1});const ke=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{ke as _};
