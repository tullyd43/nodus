// src/core/ui/AsyncView.js
export class AsyncView {
	/**

	 * TODO: Add JSDoc for method constructor

	 * @memberof AutoGenerated

	 */

	constructor(loader) {
		this.loader = loader;
		this.ctrl = null;
		this.state = "idle";
	}

	/**


	 * TODO: Add JSDoc for method load


	 * @memberof AutoGenerated


	 */


	async load() {
		this.ctrl?.abort();
		this.ctrl = new AbortController();
		this.state = "loading";
		try {
			const data = await this.loader({ signal: this.ctrl.signal });
			this.state = "ready";
			return data;
		} catch (err) {
			if (err.name === "AbortError") return;
			this.state = "error";
			throw err;
		}
	}

	/**


	 * TODO: Add JSDoc for method dispose


	 * @memberof AutoGenerated


	 */


	dispose() {
		this.ctrl?.abort();
		this.state = "disposed";
	}
}
